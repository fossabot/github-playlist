# https://help.github.com/en/actions/automating-your-workflow-with-github-actions/workflow-syntax-for-github-actions
name: test schedule

on:
  push
  schedule:
    - cron:  "0 23 * * *"

jobs:
  build:
    name: schedule helloworld
    runs-on: ubuntu-latest
    steps:
      - name: Echo the greeting's time
        run: hostname

      - name: Send message to Slack API
        uses: archive/github-actions-slack@master
        with:
          slack-bot-user-oauth-access-token: ${{ secrets.SLACK_BOT_USER_OAUTH_ACCESS_TOKEN }}
          slack-channel: build_result
          slack-text: |
            ${{ github.repository }} build done
            https://github.com/${{ github.repository }}/commit/${{ github.sha }}/checks

      - name: Result from "Send Message"
        run: echo "The result was ${{ steps.notify.outputs.slack-result }}"
